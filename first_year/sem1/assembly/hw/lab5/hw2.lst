     1                                  bits 32 ; assembling for the 32 bits architecture
     2                                  
     3                                  ; declare the EntryPoint (a label defining the very first instruction of the program)
     4                                  global start        
     5                                  
     6                                  ; declare external functions needed by our program
     7                                  extern exit               ; tell nasm that exit exists even if we won't be defining it
     8                                  import exit msvcrt.dll    ; exit is a function that ends the calling process. It is defined in msvcrt.dll
     9                                                            ; msvcrt.dll contains exit, printf and all the other important C-runtime specific functions
    10                                  
    11                                  ; our data is declared here (the variables needed by our program)
    12                                  segment data use32 class=data
    13                                      ; ...
    14 00000000 020103FDFC02FA              A db 2, 1, 3, -3, -4, 2, -6
    15                                      lenA equ $ - A
    16 00000007 0405FB07FAFE01              B db 4, 5, -5, 7, -6, -2, 1
    17                                      lenB equ $ - B
    18 0000000E 00<rept>                    R times lenA + lenB db 0
    19                                  
    20                                  ; our code starts here
    21                                  segment code use32 class=code
    22                                      start:
    23                                          ; ...
    24 00000000 B907000000                      mov ecx, lenA
    25 00000005 31F6                            xor esi, esi 
    26 00000007 31DB                            xor ebx, ebx 
    27 00000009 E320                            jecxz End1
    28                                          RepeatA:
    29 0000000B 8A86[00000000]                      mov al, [A + esi]
    30 00000011 3C00                                cmp al, 0
    31 00000013 7C05                                jl is_negativeA
    32 00000015 46                                  inc esi
    33 00000016 E2F3                            loop RepeatA
    34 00000018 EB11                            jmp End1 
    35                                                  
    36                                          is_negativeA:
    37 0000001A A801                               test al, 1
    38 0000001C 7403                               jz is_evenA
    39 0000001E 46                                 inc esi 
    40 0000001F E2EA                               loop RepeatA
    41                                          
    42                                          is_evenA:
    43 00000021 8883[0E000000]                      mov [R + ebx], al
    44 00000027 43                                  inc ebx 
    45 00000028 46                                  inc esi
    46 00000029 E2E0                                loop RepeatA
    47                                              
    48                                          End1:
    49                                          
    50 0000002B B907000000                      mov ecx, lenB        
    51 00000030 31F6                            xor esi, esi
    52 00000032 E320                            jecxz End2
    53                                          RepeatB:
    54 00000034 8A86[07000000]                      mov al, [B + esi]
    55 0000003A 3C00                                cmp al, 0
    56 0000003C 7C05                                jl is_negativeB
    57 0000003E 46                                  inc esi 
    58 0000003F E2F3                            loop RepeatB
    59 00000041 EB11                            jmp End2
    60                                          
    61                                          is_negativeB:
    62 00000043 A801                               test al, 1
    63 00000045 7403                               jz is_evenB
    64 00000047 46                                 inc esi 
    65 00000048 E2EA                               loop RepeatB
    66                                             
    67                                          is_evenB:
    68 0000004A 8883[0E000000]                      mov [R + ebx], al
    69 00000050 43                                  inc ebx
    70 00000051 46                                  inc esi
    71 00000052 E2E0                                loop RepeatB
    72                                                  
    73                                          End2:
    74 00000054 A0[0E000000]                    mov al, [R]
    75 00000059 8A1D[0F000000]                  mov bl, [R + 1]
    76 0000005F 8A0D[10000000]                  mov cl, [R + 2]
    77 00000065 8A15[11000000]                  mov dl, [R + 3]
    78                                          
    79                                          ; exit(0)
    80 0000006B 6A00                            push    dword 0      ; push the parameter for exit onto the stack
    81 0000006D FF15[00000000]                  call    [exit]       ; call exit to terminate the program
