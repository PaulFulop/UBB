     1                                  bits 32 ; assembling for the 32 bits architecture
     2                                  
     3                                  ; declare the EntryPoint (a label defining the very first instruction of the program)
     4                                  global start        
     5                                  
     6                                  ; declare external functions needed by our program
     7                                  extern exit               ; tell nasm that exit exists even if we won't be defining it
     8                                  import exit msvcrt.dll    ; exit is a function that ends the calling process. It is defined in msvcrt.dll
     9                                                            ; msvcrt.dll contains exit, printf and all the other important C-runtime specific functions
    10                                  
    11                                  ; our data is declared here (the variables needed by our program)
    12                                  segment data use32 class=data
    13                                      ; ...
    14 00000000 01020304                    S1 db 1, 2, 3, 4
    15                                      len equ $ - S1 
    16 00000004 05060708                    S2 db 5, 6, 7, 8
    17 00000008 00<rept>                    D times len db 0
    18                                  
    19                                  ; our code starts here
    20                                  segment code use32 class=code
    21                                      start:
    22                                      ;Two byte strings S1 and S2 are given, having the same length.
    23                                      ;Obtain the string D in the following way: each element found on the even positions of D is the sum of the corresponding elements from S1 and S2,
    24                                      ;and each element found on the odd positions of D is the difference of the corresponding elements from S1 and S2.
    25                                      ;S1: 1, 2, 3, 4
    26                                      ;S2: 5, 6, 7, 8
    27                                      ;D: 6, -4, 10, -4
    28                                      
    29 00000000 B904000000                      mov ecx, len
    30 00000005 31F6                            xor esi, esi 
    31 00000007 E338                            jecxz End
    32                                          Repeat:
    33 00000009 F7C601000000                       test esi, 1
    34 0000000F 7419                               jz is_even
    35 00000011 8A86[00000000]                     mov al, [S1 + esi]
    36 00000017 8A9E[04000000]                     mov bl, [S2 + esi]
    37 0000001D 28D8                               sub al, bl 
    38 0000001F 8886[08000000]                     mov [D + esi], al 
    39 00000025 46                                 inc esi
    40 00000026 E2E1                            loop Repeat
    41 00000028 EB17                            jmp End 
    42                                          
    43                                      is_even:
    44 0000002A 8A86[00000000]                  mov al, [S1 + esi]
    45 00000030 8A9E[04000000]                  mov bl, [S2 + esi]
    46 00000036 00D8                            add al, bl
    47 00000038 8886[08000000]                  mov [D + esi], al
    48 0000003E 46                              inc esi 
    49 0000003F E2C8                            loop Repeat
    50                                                  
    51                                          End:
    52                                          
    53 00000041 A0[08000000]                    mov al, [D]
    54 00000046 8A1D[09000000]                  mov bl, [D + 1]
    55 0000004C 8A0D[0A000000]                  mov cl, [D + 2]
    56 00000052 8A15[0B000000]                  mov dl, [D + 3]
    57                                          
    58                                          ; exit(0)
    59 00000058 6A00                            push    dword 0      ; push the parameter for exit onto the stack
    60 0000005A FF15[00000000]                  call    [exit]       ; call exit to terminate the program
